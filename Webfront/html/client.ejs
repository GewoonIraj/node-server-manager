<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=0.7">
        <title>Server Overview | Node Server Manager</title>
        <meta property="og:title" content="Server Overview | Node Server Manager">
        <meta property="og:type" content="website">
        <meta property="og:description" content="Node Server Manager is a administration tool for Plutonium IW5">
        <meta name="description" content="Node Server Manager is a administration tool for Plutonium IW5">
        <meta name="keywords" content="IW4MAdmin, IW5, Plutonium, T6, NodeJs, server, administration, IW4x, MW2, Modern Warfare 3">
        <script type='text/javascript' src='/js/main.js'></script>
        <script type='text/javascript' src='/js/profile.js'></script>
        <link rel="stylesheet" type="text/css" href="/css/xbbcode.css">
        <script src="/js/xbbcode.js" type="text/javascript"></script>
        <script src="/js/moment-with-locales.js" type="text/javascript"></script>
        <script src="/js/moment-timezone-with-data-10-year-range.js" type="text/javascript"></script>
        <script type='text/javascript' src='/js/font-awesome.js'></script>
        <script>
            var Client = {
                Name: '<%= Client.Name%>',
                ClientId: '<%= Client.ClientId%>'
            }
        </script>
        <link rel='stylesheet' type='text/css' href='/css/global.css'></link>
    </head>
    <body>
        <%- header%>
        <div class='wf-profile wf-default'>

        <% if (Client) {%>
            <div class='wf-profile-header'>
                <div class='wf-profile-header-name'>
                    <div class='profile-header-left'>
                        <%= Client.Name %>
                        <i class='fas fa-circle fa-xs wf-profile-status iw-<%= Client.Status.Color %>'></i>
                        <div class='wf-profile-header-online'><%= Client.Status.String %></div>
                    </div>
                    <div class='profile-header-right'>
                        <% if ( self && self.PermissionLevel >= Permissions.Levels[Permissions.Commands.COMMAND_KICK] && Client.InGame.Online ) {%>
                            <div title='Kick' onclick='kickClient()' class='wf-profile-header-button'><i class="fas fa-times"></i></div>
                        <% } %>
                        <% if ( self && self.PermissionLevel >= Permissions.Levels[Permissions.Commands.COMMAND_BAN] ) {%>
                            <div title='Ban' onclick='banClient()' class='wf-profile-header-button'><i class="fas fa-gavel"></i></div>
                        <% } %>
                        <% if ( self && self.ClientId == Client.ClientId ) {%>
                            <div title='Edit Profile' onclick='editProfile()' class='wf-profile-header-button'><i class="fas fa-edit"></i></div>
                        <% } %>
                    </div>
                </div>
                <div class='wf-profile-role'>
                    <div><%= Client.Role %></div>
                </div>
                <div class='wf-profile-description-wrap'>
                    <div class='wf-profile-description-line'>
                        <pre class='wf-profile-description-inline' data-raw-text='<%= Client.Description ? Client.Description : 'No info' %>' data-profile-info>
                            <%= Client.Description ? Client.Description : 'No info' %>
                        </pre>
                    </div>
                    <div class='wf-profile-description-button' data-profile-submit style='display:none'>
                        Save
                    </div>
                </div>
            </div>
            <div class='wf-profile-info'>
                <div class='wf-profile-info-info'>
                    <div>#<%= Client.ClientId %></div>
                    <div>ID</div>
                </div>
                <% if (Client.InGame.Online) { %>
                <div class='wf-profile-info-info'>
                    <div colorcode><%= Client.InGame.Hostname %></div>
                    <div>Current Sever</div>
                </div>
                <% } %>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Stats.Kills ? Client.Stats.Kills : 0 %></div>
                    <div>Kills</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Stats.Deaths ? Client.Stats.Deaths : 0 %></div>
                    <div>Deaths</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Stats.Kills ? (Client.Stats.Kills / Client.Stats.Deaths).toFixed(2) : 0 %></div>
                    <div>KDR</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Stats.Performance ? Client.Stats.Performance.toFixed(2) : 100%></div>
                    <div>Performance</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Meta.Damage ? Client.Meta.Damage : 0%></div>
                    <div>Total Damage</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Meta.MostUsed ? Client.Meta.MostUsed : 'none' %></div>
                    <div>Favourite Weapon</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= Client.Meta.HitLoc ? Client.Meta.HitLoc : 'none' %></div>
                    <div>Most Hit</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= moment(Client.FirstConnection).calendar() %></div>
                    <div>First Connection</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div><%= moment(Client.Date).calendar() %></div>
                    <div>Last Seen</div>
                </div>
                <div class='wf-profile-info-info'>
                    <div id='message-count'><%= Client.messageCount %></div>
                    <div>Messages</div>
                </div>
            </div>
            <% if (Client.Messages.length > 0) { %>
                <div class='wf-profile-info nice-scrollbar' id='message-log'>
                    <% Client.Messages.forEach(Message => { %>
                        <div class='wf-message'>
                            <div class='wf-message-sender'>
                                <a class='wf-link wf-message-sender' href='/id/<%= Client.ClientId %>'><%= Client.Name %></a>:</div>
                            <div class='wf-message-message'><%= Message.Message %></div>
                            <div class='wf-default wf-message-date'><%= moment(Message.Date).calendar() %></div>
                        </div>
                    <% }) %>%>
                </div>
            <% } %>
        <% } else { %>
            <div class='wf-profile-header'>
                <div class='wf-profile-header-name'>Player not found</div>
            </div>
        <% }%>
        </div>
    </body>
</html>